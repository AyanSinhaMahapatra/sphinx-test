

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Development &mdash; sphinx-test-1.0 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="JSON to CSV Conversion" href="json_to_csv.html" />
    <link rel="prev" title="Deltacode Scoring" href="deltacode_scoring.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> sphinx-test-1.0
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../scancode-workbench/index.html"><strong>Scancode-Workbench Documentation</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html"><strong>Deltacode Documentation</strong></a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="comprehensive_installation.html">Comprehensive Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="deltacode_output.html">Deltacode Output: Format, Fields and Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="deltacode_scoring.html">Deltacode Scoring</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#code-layout-and-conventions">Code layout and conventions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#running-tests">Running tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pip-requirements-and-the-configure-script">pip requirements and the configure script</a></li>
<li class="toctree-l4"><a class="reference internal" href="#deltacode-requirements-and-third-party-python-libraries">DeltaCode requirements and third-party Python libraries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-deltacode-as-a-python-library">Using DeltaCode as a Python library</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="json_to_csv.html">JSON to CSV Conversion</a></li>
<li class="toctree-l2"><a class="reference internal" href="release_process.html">Release Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="gsoc19_final_report.html">Google Summer of Code 2019 - Final report</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../aboutcode-docs/home.html">AboutCode Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aboutcode-toolkit/index.html"><strong>AboutCode-Toolkit Documentation</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../aboutcode-data/abcd.html">AboutCode Data : ABCD</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../help.html">Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc_maintenance.html">Document Maintenance</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">sphinx-test-1.0</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html"><strong>Deltacode Documentation</strong></a> &raquo;</li>
        
      <li>Development</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/deltacode/development.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="development">
<h1>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h1>
<p>See CONTRIBUTING.rst for details:
<a class="reference external" href="https://github.com/nexB/deltacode/blob/develop/CONTRIBUTING.rst">https://github.com/nexB/deltacode/blob/develop/CONTRIBUTING.rst</a></p>
<div class="section" id="code-layout-and-conventions">
<h2>Code layout and conventions<a class="headerlink" href="#code-layout-and-conventions" title="Permalink to this headline">¶</a></h2>
<p>Source code is in <code class="docutils literal notranslate"><span class="pre">src/</span></code>. Tests are in <code class="docutils literal notranslate"><span class="pre">tests/</span></code>.</p>
<p>Each test script is named <code class="docutils literal notranslate"><span class="pre">test_XXXX</span></code> and while we love to use <code class="docutils literal notranslate"><span class="pre">py.test</span></code> as a test runner,
most tests have no dependencies on <code class="docutils literal notranslate"><span class="pre">py.test</span></code>, only on the <code class="docutils literal notranslate"><span class="pre">unittest</span></code> module (with the
exception of some command line tests that depend on pytest monkeypatching capabilities.</p>
<p>When source or tests need data files, we store these in a <code class="docutils literal notranslate"><span class="pre">data</span></code> subdirectory.</p>
<p>We use PEP8 conventions with a relaxed line length that can be up to 90’ish characters long when
needed to keep the code clear and readable.</p>
<p>We store pre-built <strong>bundled</strong> native binaries in <code class="docutils literal notranslate"><span class="pre">bin/</span></code> sub-directories of each <code class="docutils literal notranslate"><span class="pre">src/</span></code>
packages. These binaries are organized by OS and architecture. This ensure that DeltaCode works
out of the box either using a checkout or a download, without needing a compiler and toolchain to
be installed.</p>
<p>We store <strong>bundled</strong> thirdparty components and libraries in the <code class="docutils literal notranslate"><span class="pre">thirdparty</span></code> directory. Python
libraries are stored as wheels, eventually pre-built if the corresponding wheel is not available
in the Pypi repository.</p>
<p>Some of these components may be advanced builds with bug fixes or advanced patches.</p>
<p>We write tests, a lot of tests, thousands of tests. Several tests are data-driven and use data
files as test input and sometimes data files as test expectation (in this case using either JSON or
YAML files). The tests should pass on Linux 64 bits, Windows 32 and 64 bits and on MacOSX 10.6.8
and up. We maintain two CI loops with Travis (Linux) at <a class="reference external" href="https://travis-ci.org/nexB/deltacode">https://travis-ci.org/nexB/deltacode</a> and
Appveyor (Windows) at <a class="reference external" href="https://ci.appveyor.com/project/nexB/deltacode">https://ci.appveyor.com/project/nexB/deltacode</a></p>
<p>When finding bugs or adding new features, we add tests. See existing test code for examples.</p>
<div class="section" id="running-tests">
<h3>Running tests<a class="headerlink" href="#running-tests" title="Permalink to this headline">¶</a></h3>
<p>DeltaCode comes with over 130 unit tests to ensure detection accuracy and stability across Linux,
Windows and macOS OSes: we kinda love tests, do we?</p>
<p>We use pytest to run the tests: call the <code class="docutils literal notranslate"><span class="pre">py.test</span></code> script to run the whole test suite. This is
installed by <code class="docutils literal notranslate"><span class="pre">pytest</span></code> which is bundled with a DeltaCode checkout and installed when you run
<code class="docutils literal notranslate"><span class="pre">./configure</span></code>).</p>
<p>If you are running from a fresh git clone and you run <code class="docutils literal notranslate"><span class="pre">./configure</span></code> and then
<code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">bin/activate</span></code> the <code class="docutils literal notranslate"><span class="pre">py.test</span></code> command will be available in your path.</p>
<p>Alternatively if you have already configured but are not in an activated “virtualenv” the
<code class="docutils literal notranslate"><span class="pre">py.test</span></code> command is available under <code class="docutils literal notranslate"><span class="pre">&lt;root</span> <span class="pre">of</span> <span class="pre">your</span> <span class="pre">checkout&gt;/bin/py.test</span></code></p>
<p>(Note: paths here are for POSIX, but mostly the same applies to Windows)</p>
<p>If you have a multiprocessor machine you might want to run the tests in parallel (and faster)
For instance: <code class="docutils literal notranslate"><span class="pre">py.test</span> <span class="pre">-n4</span></code> runs the tests on 4 CPUs.
We typically run the tests in verbose mode with <code class="docutils literal notranslate"><span class="pre">py.test</span> <span class="pre">-vvs</span> <span class="pre">-n4</span></code></p>
<p>See also <a class="reference external" href="https://docs.pytest.org">https://docs.pytest.org</a> for details or use the <code class="docutils literal notranslate"><span class="pre">py.test</span> <span class="pre">-h</span></code> command to show the many
other options available.</p>
<p>One useful option is to run a select subset of the test functions matching a pattern with the
<code class="docutils literal notranslate"><span class="pre">-k</span></code> option for instance: <code class="docutils literal notranslate"><span class="pre">py.test</span> <span class="pre">-vvs</span> <span class="pre">-k</span> <span class="pre">tcpdump</span></code> would only run test functions that contain
the string “tcpdump” in their name or their class name or module name .</p>
<p>Another useful option after a test run with some failures is to re-run only the failed tests with
the <code class="docutils literal notranslate"><span class="pre">--lf</span></code> option for instance: <code class="docutils literal notranslate"><span class="pre">py.test</span> <span class="pre">-vvs</span> <span class="pre">--lf</span></code> would only run only test functions that
failed in the previous run.</p>
</div>
<div class="section" id="pip-requirements-and-the-configure-script">
<h3>pip requirements and the configure script<a class="headerlink" href="#pip-requirements-and-the-configure-script" title="Permalink to this headline">¶</a></h3>
<p>DeltaCode use the <code class="docutils literal notranslate"><span class="pre">configure</span></code> and <code class="docutils literal notranslate"><span class="pre">configure.bat</span></code> (and <code class="docutils literal notranslate"><span class="pre">etc/configure.py</span></code> behind the scenes)
scripts to install a <a class="reference external" href="https://virtualenv.pypa.io/en/stable/">virtualenv</a>, install required
packaged dependencies <a class="reference external" href="https://github.com/pypa/pip">as pip</a> requirements and more configure tasks
such that DeltaCode can be installed in a self-contained way with <strong>no network connectivity</strong>
required.</p>
</div>
<div class="section" id="deltacode-requirements-and-third-party-python-libraries">
<h3>DeltaCode requirements and third-party Python libraries<a class="headerlink" href="#deltacode-requirements-and-third-party-python-libraries" title="Permalink to this headline">¶</a></h3>
<p>In a somewhat unconventional way, all the required libraries are bundled aka. copied in the repo
itself in the thirdparty/ directory. If DeltaCode were only a library it would not make sense. But
its is first an application and having a well defined frozen set of dependent packages is important
for an app.</p>
<p>The benefit of this approach (combined with the <code class="docutils literal notranslate"><span class="pre">configure</span></code> script) means that a mere checkout of
the repository contains <strong>everything</strong> needed to run DeltaCode except for a Python interpreter.</p>
</div>
<div class="section" id="using-deltacode-as-a-python-library">
<h3>Using DeltaCode as a Python library<a class="headerlink" href="#using-deltacode-as-a-python-library" title="Permalink to this headline">¶</a></h3>
<p>(Coming Soon) DeltaCode can be used alright as a Python library and is available as as a Python
wheel in Pypi and installed with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">deltacode</span></code>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="json_to_csv.html" class="btn btn-neutral float-right" title="JSON to CSV Conversion" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="deltacode_scoring.html" class="btn btn-neutral float-left" title="Deltacode Scoring" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, AyanSinha

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>